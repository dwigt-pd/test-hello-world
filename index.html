<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello Universe</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: radial-gradient(ellipse at center, #000000 0%, #1f011b 100%);
            overflow: hidden;
            gap: 24px;
        }
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        h1 {
            color: white;
            font-size: 48px;
            position: relative;
            z-index: 1;
            margin: 0;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
            transition: color 0.4s, text-shadow 0.4s;
        }
        h1.ludicrous-active {
            color: #ff6600;
            text-shadow: 0 0 30px rgba(255,100,0,0.9), 0 0 60px rgba(255,50,0,0.45);
            animation: ludicrous-bounce 0.65s ease-in-out infinite;
        }
        @keyframes ludicrous-bounce {
            0%   { transform: translate(0,    0)    rotate(-2deg) scale(1);    }
            20%  { transform: translate(10px, -16px) rotate(3deg) scale(1.08); }
            40%  { transform: translate(-8px,  7px) rotate(-2deg) scale(0.95); }
            60%  { transform: translate(13px,  11px) rotate(4deg) scale(1.06); }
            80%  { transform: translate(-5px, -9px) rotate(-3deg) scale(1.02); }
            100% { transform: translate(0,    0)    rotate(-2deg) scale(1);    }
        }
        #plaid-gif {
            display: none;
            position: relative;
            z-index: 1;
            max-height: 60vh;
            max-width: 90vw;
        }

        /* â”€â”€ Control Panel â”€â”€ */
        #control-panel {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            display: grid;
            grid-template-columns: auto 1px auto 1px auto;
            grid-template-rows: auto auto;
            column-gap: 28px;
            row-gap: 10px;
            align-items: center;
            justify-items: center;
            background: linear-gradient(160deg, #6e6e6e 0%, #444 40%, #2e2e2e 100%);
            border-radius: 8px;
            padding: 18px 28px 22px;
            box-shadow:
                6px 6px 18px rgba(0,0,0,0.85),
                -1px -1px 0 rgba(255,255,255,0.08),
                inset 0 1px 0 rgba(255,255,255,0.12),
                inset 0 -2px 6px rgba(0,0,0,0.5);
        }

        /* Explicit grid placement */
        #lbl-speed  { grid-column: 1; grid-row: 1; }
        #lbl-armed  { grid-column: 3; grid-row: 1; }
        #lbl-dome   { grid-column: 5; grid-row: 1; }
        #knob-wrap  { grid-column: 1; grid-row: 2; }
        #go-wrap    { grid-column: 3; grid-row: 2; }
        #dome-btn   { grid-column: 5; grid-row: 2; }
        .panel-divider { grid-row: 1 / 3; align-self: stretch; }

        .panel-label {
            font-size: 9px;
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #aaa;
            text-shadow: 0 1px 2px rgba(0,0,0,0.9);
            font-family: Arial, sans-serif;
            text-align: center;
            line-height: 1.4;
            height: 28px;
            display: grid;
            place-items: center;
        }

        .panel-divider {
            width: 1px;
            background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.1), transparent);
        }

        #go-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        /* â”€â”€ Rotary Knob â”€â”€ */
        #knob-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        #knob-container {
            position: relative;
            width: 100px;
            height: 100px;
            cursor: grab;
            user-select: none;
        }
        #knob-container:active { cursor: grabbing; }

        #knob-outer {
            position: absolute;
            inset: 0;
            border-radius: 50%;
            background: radial-gradient(circle at 35% 30%, #888 0%, #555 40%, #333 70%, #222 100%);
            box-shadow:
                0 8px 20px rgba(0,0,0,0.8),
                inset 0 1px 3px rgba(255,255,255,0.15),
                0 0 0 4px #2a2a2a,
                0 0 0 6px #3a3a3a;
        }

        #knob-indicator {
            position: absolute;
            top: 10px;
            left: calc(50% - 2px);
            width: 4px;
            height: 40px;
            background: linear-gradient(to bottom, #ffffff 0%, rgba(255,255,255,0.55) 100%);
            border-radius: 2px 2px 0 0;
            transform-origin: 50% 100%; /* pivot = bottom of bar = center of 100px knob */
            pointer-events: none;
            z-index: 2;
        }

        #speed-readout {
            font-size: 10px;
            font-weight: bold;
            letter-spacing: 2px;
            color: #ff9900;
            text-shadow: 0 0 8px rgba(255,150,0,0.6);
            font-family: 'Courier New', monospace;
            text-align: center;
            min-width: 90px;
        }

        /* â”€â”€ GO Switch â”€â”€ */
        #go-switch-outer {
            width: 34px;
            height: 70px;
            background: linear-gradient(to bottom, #3a3a3a 0%, #2a2a2a 100%);
            border-radius: 5px;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.7), 0 0 0 2px #1e1e1e;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding: 5px;
            position: relative;
        }

        #go-toggle {
            width: 24px;
            height: 28px;
            border-radius: 3px;
            background: linear-gradient(to bottom, #b02020 0%, #7a0000 100%);
            box-shadow: 0 2px 6px rgba(0,0,0,0.7), inset 0 1px 0 rgba(255,80,80,0.25);
            transition: transform 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        background 0.3s, box-shadow 0.3s;
            pointer-events: none;
        }

        #go-toggle.armed {
            transform: translateY(-34px);
            background: linear-gradient(to bottom, #ff5555 0%, #cc0000 100%);
            box-shadow:
                0 0 14px rgba(255,0,0,0.9),
                0 0 30px rgba(255,0,0,0.4),
                0 2px 6px rgba(0,0,0,0.7),
                inset 0 1px 0 rgba(255,160,160,0.4);
        }

        #go-label {
            font-size: 13px;
            font-weight: bold;
            letter-spacing: 3px;
            color: #773333;
            text-shadow: none;
            transition: color 0.3s, text-shadow 0.3s;
        }
        #go-label.armed {
            color: #ff5555;
            text-shadow: 0 0 10px rgba(255,0,0,0.9);
        }

        /* â”€â”€ Dome Button â”€â”€ */
        #dome-btn {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle at 36% 32%, #ffffff 0%, #e4e4e4 28%, #aaaaaa 58%, #777 82%, #555 100%);
            box-shadow:
                0 10px 28px rgba(0,0,0,0.75),
                inset 0 -5px 10px rgba(0,0,0,0.25),
                0 0 0 6px #4a4a4a,
                0 0 0 8px #333;
            border: none;
            cursor: not-allowed;
            transition: transform 0.08s, box-shadow 0.08s, background 0.2s, opacity 0.3s;
            opacity: 0.4;
        }
        #dome-btn.armed {
            cursor: pointer;
            opacity: 1;
            background: radial-gradient(circle at 36% 32%, #ffffff 0%, #f0f0f0 28%, #d8d8d8 58%, #aaa 82%, #888 100%);
            animation: dome-ready 1.4s ease-in-out infinite alternate;
        }
        #dome-btn.armed:hover {
            background: radial-gradient(circle at 36% 32%, #ffffff 0%, #f8f8f8 28%, #e5e5e5 58%, #bbb 82%, #999 100%);
            transform: scale(1.03);
        }
        #dome-btn.armed:active {
            transform: scale(0.94) translateY(4px);
        }
        #dome-btn.active {
            cursor: pointer;
            opacity: 1;
            background: radial-gradient(circle at 36% 32%, #ff9999 0%, #ff4444 28%, #cc0000 58%, #880000 82%, #550000 100%);
            box-shadow:
                0 0 30px rgba(255,0,0,0.8),
                0 0 60px rgba(255,0,0,0.3),
                0 10px 28px rgba(0,0,0,0.75),
                inset 0 -5px 10px rgba(0,0,0,0.25),
                0 0 0 6px #4a4a4a,
                0 0 0 8px #333;
            animation: dome-pulse 0.5s ease-in-out infinite alternate;
        }
        #dome-btn.active:hover { transform: scale(1.03); }
        #dome-btn.active:active { transform: scale(0.94) translateY(4px); }
        #dome-btn:focus-visible {
            outline: 3px solid white;
            outline-offset: 6px;
        }

        @keyframes dome-ready {
            from { box-shadow: 0 0 6px rgba(255,255,255,0.2), 0 10px 28px rgba(0,0,0,0.75), inset 0 -5px 10px rgba(0,0,0,0.25), 0 0 0 6px #4a4a4a, 0 0 0 8px #333; }
            to   { box-shadow: 0 0 22px rgba(255,255,255,0.75), 0 10px 28px rgba(0,0,0,0.75), inset 0 -5px 10px rgba(0,0,0,0.25), 0 0 0 6px #4a4a4a, 0 0 0 8px #333; }
        }
        @keyframes dome-pulse {
            from { box-shadow: 0 0 18px rgba(255,0,0,0.6), 0 10px 28px rgba(0,0,0,0.75), inset 0 -5px 10px rgba(0,0,0,0.25), 0 0 0 6px #4a4a4a, 0 0 0 8px #333; }
            to   { box-shadow: 0 0 45px rgba(255,0,0,1), 0 0 80px rgba(255,0,0,0.35), 0 10px 28px rgba(0,0,0,0.75), inset 0 -5px 10px rgba(0,0,0,0.25), 0 0 0 6px #4a4a4a, 0 0 0 8px #333; }
        }
    </style>
</head>
<body>
    <canvas id="starfield"></canvas>
    <h1 id="title">ðŸš€ Hello Universe! ðŸš€</h1>
    <img id="plaid-gif" src="https://static.tvtropes.org/pmwiki/pub/images/ludicrous_speed.jpg" alt="Ludicrous speed - we've gone to plaid!" />

    <div id="control-panel" role="group" aria-label="Speed controls">

        <div id="lbl-speed"  class="panel-label"><span>Master Speed<br>Control</span></div>
        <div class="panel-divider"></div>
        <div id="lbl-armed"  class="panel-label"><span>Armed</span></div>
        <div class="panel-divider"></div>
        <div id="lbl-dome"   class="panel-label"><span>Ludicrous<br>Speed</span></div>

        <div id="knob-wrap">
            <div id="knob-container" role="slider" aria-label="Speed dial"
                 aria-valuemin="-135" aria-valuemax="135" aria-valuenow="-45" aria-valuetext="LIGHT"
                 tabindex="0">
                <div id="knob-outer"></div>
                <div id="knob-indicator"></div>
            </div>
            <div id="speed-readout">LIGHT</div>
        </div>

        <div id="go-wrap">
            <div id="go-switch-outer">
                <div id="go-toggle"></div>
            </div>
            <div id="go-label">GO</div>
        </div>

        <button id="dome-btn"
                aria-label="Engage ludicrous speed"
                aria-disabled="true"
                disabled></button>

    </div>

    <script>
        const canvas    = document.getElementById('starfield');
        const ctx       = canvas.getContext('2d');
        const title     = document.getElementById('title');
        const gif       = document.getElementById('plaid-gif');
        const knobEl    = document.getElementById('knob-container');
        const indicator = document.getElementById('knob-indicator');
        const readout   = document.getElementById('speed-readout');
        const goToggle  = document.getElementById('go-toggle');
        const goLabel   = document.getElementById('go-label');
        const domeBtn   = document.getElementById('dome-btn');

        canvas.width  = window.innerWidth;
        canvas.height = window.innerHeight;

        // â”€â”€ Dial â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const DIAL_MIN     = -135;
        const DIAL_MAX     =  135;
        const ARMED_ANGLE  =  115;   // dome button arms above this
        const SPEED_MAX    =   28;
        const SPEED_PLAID  =   45;

        let dialAngle    = -45;      // start roughly at LIGHT
        let plaid        = false;
        let currentSpeed = 0;
        let tunnelOffset = 0;

        function angleToSpeed(angle) {
            const t = (angle - DIAL_MIN) / (DIAL_MAX - DIAL_MIN); // 0..1
            return t * t * SPEED_MAX;  // quadratic: gentle at low end, fast at top
        }

        function angleToLabel(angle) {
            if (angle < -80) return 'OFF';
            if (angle <  -5) return 'LIGHT';
            if (angle < ARMED_ANGLE) return 'RIDICULOUS';
            return 'LUDICROUS';
        }

        function setDialAngle(angle) {
            dialAngle = Math.max(DIAL_MIN, Math.min(DIAL_MAX, angle));

            indicator.style.transform = `rotate(${dialAngle}deg)`;
            readout.textContent = angleToLabel(dialAngle);
            knobEl.setAttribute('aria-valuenow',  Math.round(dialAngle));
            knobEl.setAttribute('aria-valuetext', angleToLabel(dialAngle));

            const armed = dialAngle >= ARMED_ANGLE && !plaid;

            if (dialAngle < ARMED_ANGLE && plaid) {
                exitPlaid();
            }

            goToggle.classList.toggle('armed', armed);
            goLabel.classList.toggle('armed', armed);

            if (armed) {
                domeBtn.classList.add('armed');
                domeBtn.disabled = false;
                domeBtn.removeAttribute('aria-disabled');
            } else if (!plaid) {
                domeBtn.classList.remove('armed');
                domeBtn.disabled = true;
                domeBtn.setAttribute('aria-disabled', 'true');
            }
        }

        function enterPlaid() {
            plaid = true;
            domeBtn.classList.remove('armed');
            domeBtn.classList.add('active');
            domeBtn.setAttribute('aria-label', 'Disengage ludicrous speed');
            goToggle.classList.remove('armed');
            goLabel.classList.remove('armed');
            title.textContent = 'Ahhhhhh!!!!!';
            title.classList.add('ludicrous-active');
            gif.style.display = 'block';
        }

        function exitPlaid() {
            plaid = false;
            domeBtn.classList.remove('active');
            domeBtn.setAttribute('aria-label', 'Engage ludicrous speed');
            gif.style.display   = 'none';
            title.textContent   = 'ðŸš€ Hello Universe! ðŸš€';
            title.classList.remove('ludicrous-active');
            const armed = dialAngle >= ARMED_ANGLE;
            goToggle.classList.toggle('armed', armed);
            goLabel.classList.toggle('armed', armed);
            if (armed) {
                domeBtn.classList.add('armed');
                domeBtn.disabled = false;
                domeBtn.removeAttribute('aria-disabled');
            }
        }

        // â”€â”€ Knob drag â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        let dragging       = false;
        let dragStartY     = 0;
        let dragStartAngle = 0;

        knobEl.addEventListener('mousedown', e => {
            dragging       = true;
            dragStartY     = e.clientY;
            dragStartAngle = dialAngle;
            e.preventDefault();
        });
        window.addEventListener('mousemove', e => {
            if (!dragging) return;
            setDialAngle(dragStartAngle + (dragStartY - e.clientY) * 1.8);
        });
        window.addEventListener('mouseup', () => { dragging = false; });

        knobEl.addEventListener('touchstart', e => {
            dragging       = true;
            dragStartY     = e.touches[0].clientY;
            dragStartAngle = dialAngle;
            e.preventDefault();
        }, { passive: false });
        window.addEventListener('touchmove', e => {
            if (!dragging) return;
            setDialAngle(dragStartAngle + (dragStartY - e.touches[0].clientY) * 1.8);
        }, { passive: true });
        window.addEventListener('touchend', () => { dragging = false; });

        knobEl.addEventListener('keydown', e => {
            if (e.key === 'ArrowUp'   || e.key === 'ArrowRight') { setDialAngle(dialAngle + 8);  e.preventDefault(); }
            if (e.key === 'ArrowDown' || e.key === 'ArrowLeft')  { setDialAngle(dialAngle - 8); e.preventDefault(); }
        });

        // â”€â”€ Dome button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        domeBtn.addEventListener('click', () => {
            if (plaid)                      exitPlaid();
            else if (dialAngle >= ARMED_ANGLE) enterPlaid();
        });

        // â”€â”€ Starfield â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const NUM_STARS = 300;

        function newStar(spreadOut = false) {
            return {
                angle:        Math.random() * Math.PI * 2,
                dist:         spreadOut ? Math.random() * 0.8 : 0.01,
                hue:          Math.random() * 360,
                flickerPhase: Math.random() * Math.PI * 2,
                flickerSpeed: 0.025 + Math.random() * 0.04,
            };
        }

        const stars = Array.from({ length: NUM_STARS }, () => newStar(true));

        function drawTunnel(cx, cy) {
            tunnelOffset += 0.007;

            const numRings = 10;
            const maxW = canvas.width  * 0.88;
            const maxH = canvas.height * 0.88;

            ctx.lineWidth   = 2;
            ctx.strokeStyle = 'rgba(255, 100, 0, 0.75)';
            for (const [sx, sy] of [[-1,-1],[1,-1],[1,1],[-1,1]]) {
                ctx.beginPath();
                ctx.moveTo(cx, cy);
                ctx.lineTo(cx + sx * maxW / 2, cy + sy * maxH / 2);
                ctx.stroke();
            }

            for (let i = 0; i < numRings; i++) {
                const t     = ((i / numRings) + tunnelOffset) % 1;
                const scale = t * t;
                if (scale < 0.004) continue;
                const w     = maxW * scale;
                const h     = maxH * scale;
                const alpha = Math.min(1, t * 1.5) * 0.9;
                const green = Math.floor(60 + t * 80);
                ctx.strokeStyle = `rgba(255, ${green}, 0, ${alpha})`;
                ctx.lineWidth   = 1 + t * 2.5;
                ctx.strokeRect(cx - w / 2, cy - h / 2, w, h);
            }

            const glow = ctx.createRadialGradient(cx, cy, 0, cx, cy, 110);
            glow.addColorStop(0,    'rgba(255, 250, 210, 1)');
            glow.addColorStop(0.12, 'rgba(255, 200, 80,  0.85)');
            glow.addColorStop(0.4,  'rgba(255, 80,  0,   0.3)');
            glow.addColorStop(1,    'rgba(0, 0, 0, 0)');
            ctx.fillStyle = glow;
            ctx.beginPath();
            ctx.arc(cx, cy, 110, 0, Math.PI * 2);
            ctx.fill();
        }

        function draw() {
            const cx      = canvas.width  / 2;
            const cy      = canvas.height / 2;
            const maxDist = Math.sqrt(cx * cx + cy * cy);

            const targetSpeed = plaid ? SPEED_PLAID : angleToSpeed(dialAngle);
            currentSpeed += (targetSpeed - currentSpeed) * 0.08;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 0 = pure flickering dots, 1 = pure streaks
            const streakBlend = Math.min(1, currentSpeed / 3);

            for (const star of stars) {
                const prevDist = star.dist;
                star.dist += (currentSpeed / 1000) * (1 + star.dist * 3);

                const x  = cx + Math.cos(star.angle) * star.dist  * maxDist;
                const y  = cy + Math.sin(star.angle) * star.dist  * maxDist;
                const px = cx + Math.cos(star.angle) * prevDist   * maxDist;
                const py = cy + Math.sin(star.angle) * prevDist   * maxDist;

                const radius      = star.dist * 1.5;
                const baseOpacity = Math.min(1, star.dist * 1.5);

                star.flickerPhase = (star.flickerPhase + star.flickerSpeed) % (Math.PI * 2);
                const flicker = 0.35 + 0.65 * Math.abs(Math.sin(star.flickerPhase));

                if (plaid) {
                    star.hue = (star.hue + 1.5) % 360;

                    ctx.beginPath(); ctx.moveTo(px, py); ctx.lineTo(x, y);
                    ctx.strokeStyle = `hsla(${star.hue}, 100%, 60%, ${baseOpacity * 0.3})`;
                    ctx.lineWidth   = radius * 5;
                    ctx.stroke();

                    ctx.beginPath(); ctx.moveTo(px, py); ctx.lineTo(x, y);
                    ctx.strokeStyle = `hsla(${star.hue}, 100%, 82%, ${baseOpacity})`;
                    ctx.lineWidth   = radius;
                    ctx.stroke();
                } else {
                    // Flickering dot â€” fades out as streaks take over
                    if (streakBlend < 0.99) {
                        ctx.fillStyle = `rgba(255, 255, 255, ${baseOpacity * flicker * (1 - streakBlend)})`;
                        ctx.beginPath();
                        ctx.arc(x, y, Math.max(0.4, radius * 0.7), 0, Math.PI * 2);
                        ctx.fill();
                    }
                    // Streak â€” fades in as speed rises
                    if (streakBlend > 0.01) {
                        ctx.beginPath(); ctx.moveTo(px, py); ctx.lineTo(x, y);
                        ctx.strokeStyle = `rgba(255, 255, 255, ${baseOpacity * streakBlend})`;
                        ctx.lineWidth   = radius;
                        ctx.stroke();
                    }
                }

                if (x < 0 || x > canvas.width || y < 0 || y > canvas.height) {
                    Object.assign(star, newStar());
                }
            }

            if (plaid) drawTunnel(cx, cy);
            requestAnimationFrame(draw);
        }

        setDialAngle(-45);
        draw();

        window.addEventListener('resize', () => {
            canvas.width  = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
